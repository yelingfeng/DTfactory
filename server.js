/**
 * Created by yelingfeng on 2016/9/9.
 */
var Express = require('express');

var app = new Express();
var port = process.env.PORT || 8400;

app.get('/', function(req, res) {
  return res.send('<html><head></head><body><h1>test ApiServer</h1></body></html>');
});

app.all('*', function(req, res, next) {
  res.header('Access-Control-Allow-Origin', 'http://localhost:8100');
  res.header('Access-Control-Allow-Headers', 'X-Requested-With');
  res.header('Access-Control-Allow-Methods', 'PUT,POST,GET,DELETE,OPTIONS');
  res.header('Content-Type', 'application/json;charset=utf-8');
  next();
});

app.get('/module/selectModule', (req, res)=>{
  res.send({
    'result': {"bkcolor":"000000","bkimg":"","components":[{"border":"","cascadeSetting":{"cascadeData":[],"cascadeType":"1","parentRelation":"and"},"child":[],"childList":[],"childSize":null,"clsName":"","code":"图表C","content":{"chartCategory":"","chartType":"line","childType":"","code":"图表C","content":"","contentObj":null,"id":"cc72eff8-4332-46d5-b4ce-23856dfcbd98","type":"0"},"coordinate":{"height":"200","opacity":"60","width":"450","x":"730","y":"150"},"datasets":[{"code":"","datasourceId":"101","datasourceName":"cradar1","id":"74bc6074-412c-4060-9337-9f478297dff9","name":"","page":"","paramStr":[{"name":"万州区","value":"500101","zid":"zid-79835917-e1c94444"}],"remark":"","rows":"","sql":"SELECT citycode AS VALUE , NAMECN AS NAME , NAMECN AS INFO FROM city where citycode=%%图表B.VALUE%%","sqlType":"1","type":""}],"id":"474d8d2b-441b-4667-b9ce-2f6ea2690038","isDefault":"0","jumpConfig":null,"levelIndex":"501","maxNum":"3","pid":"zid-79835917-e1c94444","props":null,"titleDatasets":[],"titleName":"孙子图表","visible":"1","zid":"zid-79835917-e1c94555"},{"border":"","cascadeSetting":null,"child":["zid-79835917-e1c94444"],"childList":[{"border":"","cascadeSetting":{"cascadeData":[],"cascadeType":"1","parentRelation":"and"},"child":[],"childList":[{"border":"","cascadeSetting":{"cascadeData":[],"cascadeType":"1","parentRelation":"and"},"child":[],"childList":[],"childSize":null,"clsName":"","code":"图表C","content":{"chartCategory":"","chartType":"line","childType":"","code":"图表C","content":"","contentObj":null,"id":"cc72eff8-4332-46d5-b4ce-23856dfcbd98","type":"0"},"coordinate":{"height":"200","opacity":"60","width":"450","x":"730","y":"150"},"datasets":[{"code":"","datasourceId":"101","datasourceName":"cradar1","id":"74bc6074-412c-4060-9337-9f478297dff9","name":"","page":"","paramStr":[{"name":"万州区","value":"500101","zid":"zid-79835917-e1c94444"}],"remark":"","rows":"","sql":"SELECT citycode AS VALUE , NAMECN AS NAME , NAMECN AS INFO FROM city where citycode=%%图表B.VALUE%%","sqlType":"1","type":""}],"id":"474d8d2b-441b-4667-b9ce-2f6ea2690038","isDefault":"0","jumpConfig":null,"levelIndex":"501","maxNum":"3","pid":"zid-79835917-e1c94444","props":null,"titleDatasets":[],"titleName":"孙子图表","visible":"1","zid":"zid-79835917-e1c94555"}],"childSize":null,"clsName":"","code":"图表B","content":{"chartCategory":"","chartType":"line","childType":"","code":"图表B","content":"","contentObj":null,"id":"60b98c71-b07f-4d45-966d-9da2979a8c17","type":"0"},"coordinate":{"height":"200","opacity":"60","width":"450","x":"730","y":"150"},"datasets":[{"code":"","datasourceId":"101","datasourceName":"cradar1","id":"b67901cb-9a6e-4d6e-9c73-0edeea013385","name":"","page":"","paramStr":[{"name":"万州区","value":"500101","zid":"zid-b876897f-41d70555"}],"remark":"","rows":"","sql":"SELECT citycode AS VALUE , NAMECN AS NAME , NAMECN AS INFO FROM city where NAMECN=%%图表A.NAME%%","sqlType":"1","type":""}],"id":"f94db9bd-c607-4e12-97fa-6e8cc946ca71","isDefault":"0","jumpConfig":null,"levelIndex":"501","maxNum":"2","pid":"zid-b876897f-41d70555","props":null,"titleDatasets":[{"code":"","datasourceId":"101","datasourceName":"cradar1","id":"4c7bd841-ec63-41df-bed4-424e679d1260","name":"","page":"","paramStr":[{"name":"万州区","value":"500101","zid":"zid-b876897f-41d70555"}],"remark":"","rows":"","sql":"SELECT citycode, NAMECN AS NAME, NAMECN AS INFO FROM city where NAMECN=%%图表A.NAME%%","sqlType":"1","type":""}],"titleName":"%%图表A.NAME%% 的code：!!T.citycode!!","visible":"1","zid":"zid-79835917-e1c94444"}],"childSize":{"bgColor":"","height":"200","width":"400"},"clsName":"","code":"图表A","content":{"chartCategory":"","chartType":"line","childType":"line","code":"图表A","content":"","contentObj":null,"id":"79f4ec93-8abf-4eb5-b550-a55f96396427","type":"0"},"coordinate":{"height":"200","opacity":"40","width":"400","x":"272","y":"146"},"datasets":[{"code":"","datasourceId":"101","datasourceName":"cradar1","id":"5ad39238-d437-4d72-9f96-a33697b0673c","name":"","page":"","paramStr":[],"remark":"","rows":"","sql":"SELECT id AS VALUE , NAMECN AS NAME, NAMECN AS INFO FROM city  LIMIT 0,10","sqlType":"1","type":""}],"id":"9376d450-9e09-4ac6-a219-05c7a249da21","isDefault":"0","jumpConfig":{"id":"a6ff72ce-4afe-4a91-935c-1c85c95c9491","openType":"2","paramStr":[{"name":"param1","value":"secdomain","datatype":"my"},{"name":"param2","value":"category","datatype":"my"},{"name":"param3","value":"value","datatype":"my"},{"name":"param4","value":"name","datatype":"my"}],"remark":"","url":"/netSecur-web/trole/getlistPage"},"levelIndex":"200","maxNum":"1","pid":"","props":{"commonProp":{"cascadeValueType":"","commonAxis":"","commonBg":"","commonft":"","deg":"60","fontColor":"#ffcc66","fontFamily":"隶书","fontSize":"12px","fontStyle":"italic","fontWeight":"bold","labelStep":"","legendPositon":"","showGVal":"","showLegend":"","showRestoreVal":"","textDecoration":"underline","titleAlign":"right-top"},"specialProp":{"axis":"1","pieShowPercent":"","showBarVal":"","showLinePoint":"","showLineVal":"","showPieName":"","showPiePercent":"","showPieValues":"","tpDateFormat":"","tpDefaultType":"","tpIsDay":"","tpIsFixed":"","tpIsHour":"","tpIsQuarter":"","tpMinSize":"","xMax":"","xMin":"","xName":"","xUnit":"","xbName":"","xbUint":"","xtName":"","xtUint":"","ylMax":"","ylMin":"","ylName":"","ylUnit":"%","yrMax":"","yrMin":"","yrName":"","yrUnit":"%"}},"titleDatasets":[],"titleName":"父图表","visible":"1","zid":"zid-b876897f-41d70555"},{"border":"","cascadeSetting":{"cascadeData":[],"cascadeType":"1","parentRelation":"and"},"child":[],"childList":[{"border":"","cascadeSetting":{"cascadeData":[],"cascadeType":"1","parentRelation":"and"},"child":[],"childList":[],"childSize":null,"clsName":"","code":"图表C","content":{"chartCategory":"","chartType":"line","childType":"","code":"图表C","content":"","contentObj":null,"id":"cc72eff8-4332-46d5-b4ce-23856dfcbd98","type":"0"},"coordinate":{"height":"200","opacity":"60","width":"450","x":"730","y":"150"},"datasets":[{"code":"","datasourceId":"101","datasourceName":"cradar1","id":"74bc6074-412c-4060-9337-9f478297dff9","name":"","page":"","paramStr":[{"name":"万州区","value":"500101","zid":"zid-79835917-e1c94444"}],"remark":"","rows":"","sql":"SELECT citycode AS VALUE , NAMECN AS NAME , NAMECN AS INFO FROM city where citycode=%%图表B.VALUE%%","sqlType":"1","type":""}],"id":"474d8d2b-441b-4667-b9ce-2f6ea2690038","isDefault":"0","jumpConfig":null,"levelIndex":"501","maxNum":"3","pid":"zid-79835917-e1c94444","props":null,"titleDatasets":[],"titleName":"孙子图表","visible":"1","zid":"zid-79835917-e1c94555"}],"childSize":null,"clsName":"","code":"图表B","content":{"chartCategory":"","chartType":"line","childType":"","code":"图表B","content":"","contentObj":null,"id":"60b98c71-b07f-4d45-966d-9da2979a8c17","type":"0"},"coordinate":{"height":"200","opacity":"60","width":"450","x":"730","y":"150"},"datasets":[{"code":"","datasourceId":"101","datasourceName":"cradar1","id":"b67901cb-9a6e-4d6e-9c73-0edeea013385","name":"","page":"","paramStr":[{"name":"万州区","value":"500101","zid":"zid-b876897f-41d70555"}],"remark":"","rows":"","sql":"SELECT citycode AS VALUE , NAMECN AS NAME , NAMECN AS INFO FROM city where NAMECN=%%图表A.NAME%%","sqlType":"1","type":""}],"id":"f94db9bd-c607-4e12-97fa-6e8cc946ca71","isDefault":"0","jumpConfig":null,"levelIndex":"501","maxNum":"2","pid":"zid-b876897f-41d70555","props":null,"titleDatasets":[{"code":"","datasourceId":"101","datasourceName":"cradar1","id":"4c7bd841-ec63-41df-bed4-424e679d1260","name":"","page":"","paramStr":[{"name":"万州区","value":"500101","zid":"zid-b876897f-41d70555"}],"remark":"","rows":"","sql":"SELECT citycode, NAMECN AS NAME, NAMECN AS INFO FROM city where NAMECN=%%图表A.NAME%%","sqlType":"1","type":""}],"titleName":"%%图表A.NAME%% 的code：!!T.citycode!!","visible":"1","zid":"zid-79835917-e1c94444"}],"desc":"我是3级测试","endTime":"","id":"c7ac9331-b2ef-4bf2-adc7-6378382589f7","ip":"http://172.17.20.230:8080","name":"测试","pidTreeComponents":[{"border":"","cascadeSetting":null,"child":["zid-79835917-e1c94444"],"childList":[{"border":"","cascadeSetting":{"cascadeData":[],"cascadeType":"1","parentRelation":"and"},"child":[],"childList":[{"border":"","cascadeSetting":{"cascadeData":[],"cascadeType":"1","parentRelation":"and"},"child":[],"childList":[],"childSize":null,"clsName":"","code":"图表C","content":{"chartCategory":"","chartType":"line","childType":"","code":"图表C","content":"","contentObj":null,"id":"cc72eff8-4332-46d5-b4ce-23856dfcbd98","type":"0"},"coordinate":{"height":"200","opacity":"60","width":"450","x":"730","y":"150"},"datasets":[{"code":"","datasourceId":"101","datasourceName":"cradar1","id":"74bc6074-412c-4060-9337-9f478297dff9","name":"","page":"","paramStr":[{"name":"万州区","value":"500101","zid":"zid-79835917-e1c94444"}],"remark":"","rows":"","sql":"SELECT citycode AS VALUE , NAMECN AS NAME , NAMECN AS INFO FROM city where citycode=%%图表B.VALUE%%","sqlType":"1","type":""}],"id":"474d8d2b-441b-4667-b9ce-2f6ea2690038","isDefault":"0","jumpConfig":null,"levelIndex":"501","maxNum":"3","pid":"zid-79835917-e1c94444","props":null,"titleDatasets":[],"titleName":"孙子图表","visible":"1","zid":"zid-79835917-e1c94555"}],"childSize":null,"clsName":"","code":"图表B","content":{"chartCategory":"","chartType":"bar","childType":"","code":"图表B","content":"","contentObj":null,"id":"60b98c71-b07f-4d45-966d-9da2979a8c17","type":"0"},"coordinate":{"height":"200","opacity":"60","width":"450","x":"730","y":"150"},"datasets":[{"code":"","datasourceId":"101","datasourceName":"cradar1","id":"b67901cb-9a6e-4d6e-9c73-0edeea013385","name":"","page":"","paramStr":[{"name":"万州区","value":"500101","zid":"zid-b876897f-41d70555"}],"remark":"","rows":"","sql":"SELECT citycode AS VALUE , NAMECN AS NAME , NAMECN AS INFO FROM city where NAMECN=%%图表A.NAME%%","sqlType":"1","type":""}],"id":"f94db9bd-c607-4e12-97fa-6e8cc946ca71","isDefault":"0","jumpConfig":null,"levelIndex":"501","maxNum":"2","pid":"zid-b876897f-41d70555","props":null,"titleDatasets":[{"code":"","datasourceId":"101","datasourceName":"cradar1","id":"4c7bd841-ec63-41df-bed4-424e679d1260","name":"","page":"","paramStr":[{"name":"万州区","value":"500101","zid":"zid-b876897f-41d70555"}],"remark":"","rows":"","sql":"SELECT citycode, NAMECN AS NAME, NAMECN AS INFO FROM city where NAMECN=%%图表A.NAME%%","sqlType":"1","type":""}],"titleName":"%%图表A.NAME%% 的code：!!T.citycode!!","visible":"1","zid":"zid-79835917-e1c94444"}],"childSize":{"bgColor":"","height":"200","width":"400"},"clsName":"","code":"图表A","content":{"chartCategory":"","chartType":"line","childType":"line","code":"图表A","content":"","contentObj":null,"id":"79f4ec93-8abf-4eb5-b550-a55f96396427","type":"0"},"coordinate":{"height":"200","opacity":"40","width":"400","x":"272","y":"146"},"datasets":[{"code":"","datasourceId":"101","datasourceName":"cradar1","id":"5ad39238-d437-4d72-9f96-a33697b0673c","name":"","page":"","paramStr":[],"remark":"","rows":"","sql":"SELECT id AS VALUE , NAMECN AS NAME, NAMECN AS INFO FROM city  LIMIT 0,10","sqlType":"1","type":""}],"id":"9376d450-9e09-4ac6-a219-05c7a249da21","isDefault":"0","jumpConfig":{"id":"a6ff72ce-4afe-4a91-935c-1c85c95c9491","openType":"2","paramStr":[{"name":"param1","value":"secdomain","datatype":"my"},{"name":"param2","value":"category","datatype":"my"},{"name":"param3","value":"value","datatype":"my"},{"name":"param4","value":"name","datatype":"my"}],"remark":"","url":"/netSecur-web/trole/getlistPage"},"levelIndex":"200","maxNum":"1","pid":"","props":{"commonProp":{"cascadeValueType":"","commonAxis":"","commonBg":"","commonft":"","deg":"60","fontColor":"#ffcc66","fontFamily":"隶书","fontSize":"12px","fontStyle":"italic","fontWeight":"bold","labelStep":"","legendPositon":"","showGVal":"","showLegend":"","showRestoreVal":"","textDecoration":"underline","titleAlign":"right-top"},"specialProp":{"axis":"1","pieShowPercent":"","showBarVal":"","showLinePoint":"","showLineVal":"","showPieName":"","showPiePercent":"","showPieValues":"","tpDateFormat":"","tpDefaultType":"","tpIsDay":"","tpIsFixed":"","tpIsHour":"","tpIsQuarter":"","tpMinSize":"","xMax":"","xMin":"","xName":"","xUnit":"","xbName":"","xbUint":"","xtName":"","xtUint":"","ylMax":"","ylMin":"","ylName":"","ylUnit":"%","yrMax":"","yrMin":"","yrName":"","yrUnit":"%"}},"titleDatasets":[],"titleName":"父图表","visible":"1","zid":"zid-b876897f-41d70555"}],"startTime":"","status":"1","transparency":"30","updateTime":""}
  });
});

app.listen(port, function(err) {
  if (err) {
    console.error(err);
  } else {
    console.info('==>  Listening on port %s. Open up http://localhost:%s/ in your browser.', port, port);
  }
});
